# We use the full humble-desktop to have the colcon tool
FROM eprosima/vulcanexus:humble-desktop

# Fix needed until vulcanexus uses webots-ros2 version 2023.0.1
ENV LD_LIBRARY_PATH=/opt/ros/humble/lib/controller:$LD_LIBRARY_PATH

# Copies all the files of the controllers folder into the docker container
RUN mkdir -p /usr/local/webots-project/controllers
COPY . /usr/local/webots-project/controllers

WORKDIR /usr/local/webots-project/controllers/participant

# Build the participant package
RUN colcon build
